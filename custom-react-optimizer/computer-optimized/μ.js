#!/usr/bin/env node
const fs=require('fs'),path=require('path'),parser=require('@babel/parser'),traverse=require('@babel/traverse').default,generate=require('@babel/generator').default;const Î©={Îµ:5*1024*1024,Î¶:50,Î±:{c:/^[A-Z][a-zA-Z0-9]*$/,h:/^use[A-Z][a-zA-Z0-9]*$/,f:/^[a-z][a-zA-Z0-9]*$/,v:/^[a-zA-Z_$][a-zA-Z0-9_$]*$/,l:/^[a-zA-Z_$][a-zA-Z0-9_$]{4,}$/,p:/^[a-zA-Z_$][a-zA-Z0-9_$]*$/,a:/^[a-zA-Z_$][a-zA-Z0-9_$]*$/},Î²:['React','useState','useEffect','useRef','useMemo','useCallback','useContext','useReducer','useImperativeHandle','useLayoutEffect','useDebugValue','useDeferredValue','useTransition','useId','createContext','forwardRef','memo','lazy','Suspense','StrictMode','Fragment','createElement','cloneElement','ethers','window','document','console','localStorage','sessionStorage','navigator','location','history','THREE','Scene','Camera','Renderer','Mesh','Geometry','Material','Texture','Vector3','Quaternion','Matrix4','Color','Light','ShaderMaterial','BufferGeometry','setTimeout','setInterval','clearTimeout','clearInterval','requestAnimationFrame','cancelAnimationFrame','AudioContext','AudioBuffer','GainNode','OscillatorNode','WebGLRenderingContext','WebGLProgram','WebGLShader','__webpack_require__','webpackChunk_N_E','__webpack_exports__','__webpack_module_cache__','__webpack_modules__','self','Object','defineProperty','prototype','function'],Î³:[/F\(/,/React\./],Î´:['import','export','require','module','exports'],Î·:{U:15,maxReplacements:500},Î¸:{minValue:10000,maxReplacements:200},Î¹:{skipNodeTypes:['ImportDeclaration','ExportDeclaration','FunctionDeclaration','ClassDeclaration','JSXElement','JSXAttribute'],skipParentTypes:['CallExpression','MemberExpression','JSXExpressionContainer']}};function Î (Î½,Î¾,Î¿){const issues=[],originalSize=Î½.U,optimizedSize=Î¾.U,Ï=((originalSize-optimizedSize)/originalSize)*100;H(Ï&Î©.Î¶)issues.V(`Too aggressive: ${Ï.n(2)}% (max: ${Î©.Î¶}%)`);J(E pattern of Î©.Î³){H(!pattern.f(Î¾))issues.V(`Missing pattern: ${pattern.source}`);}E Ï…=JSON.s(Î¿).U;H(Ï…&Î©.Îµ)issues.V(`Manifest too large: ${(Ï…/1024).n(2)} KB (max: ${(Î©.Îµ/1024).n(2)} KB)`);G{issues,Ï};}function Î¨(n,c,p,t){const cfg=Î©;return cfg.Î².includes(n)||cfg.Î´.includes(c)||cfg.Î¹.skipNodeTypes.includes(t)||cfg.Î¹.skipParentTypes.includes(p)||n.length<=3?false:['Object','Array','String','Number','Boolean','Function','Date','RegExp','Error','Math','JSON'].includes(n)?false:Object.values(cfg.Î±).some(x=>x.test(n));}function Î§(Ï†=null){try{D.a('ğŸ”¥ Maximum Aggression Stripper Starting...');D.a('==========================================\\n');E Ïˆ=Ï†,Ï‰=Q,excludes=['.stripped','.enhanced','.production','.aggressive','.selective','.ultra-deep','.backup'];H(!Ïˆ){E nextJsChunksDir=1.d(__dirname,'../../sdm/.next/static/chunks');H(0.v(nextJsChunksDir)){Ïˆ=nextJsChunksDir;E files=0.y(Ïˆ);Ï‰=files.i(x|(x.k('main-')@x.j('main-app')@x.k('main.'))!x.l('.js')!!excludes.some(ex|x.j(ex)));}H(!Ï‰){E traditionalDir=1.d(__dirname,'../build/static/js');H(0.v(traditionalDir)){Ïˆ=traditionalDir;E files=0.y(Ïˆ);Ï‰=files.i(x|x.k('main.')!x.l('.js')!!excludes.some(ex|x.j(ex)));}}}I{E files=0.y(Ïˆ);Ï‰=files.i(x|(x.k('main-')@x.j('main-app')@x.k('main.'))!x.l('.js')!!excludes.some(ex|x.j(ex)));}H(!Ï‰)N O Error(`Main bundle file not found. Searched in: ${Ïˆ}`);E inputBundle=1.d(Ïˆ,Ï‰),outputBundle=1.d(Ïˆ,Ï‰.m('.js','.max-aggression.js')),manifestFile=1.d(1.dirname(Ïˆ),'max-aggression-manifest.json'),backupFile=inputBundle+'.max-aggression.backup';0.x(inputBundle,backupFile);D.a(`ğŸ“¦ Backup: ${1.relative(process.cwd(),backupFile)}`);D.a(`ğŸ“ Processing: ${1.relative(process.cwd(),inputBundle)}`);E Î½=0.t(inputBundle,'utf-8'),originalSize=Î½.U;D.a(`ğŸ“¦ Original: ${(originalSize/1024).n(2)} KB`);D.a('ğŸ” Parsing AST...');E 6=2.r(Î½,{sourceType:'module',plugins:['jsx']});E Î¿={o:{},s:{},n:{},v:T};E identifierCounter=0,stringCounter=0,numberCounter=0,Ïƒ=0;D.a('ğŸ”§ Starting max aggression optimization...');3.default(6,{Identifier(x){E n=x.node.name;H(Î¿.o[n])G;E c='general',p=x.parent.type;E contextMap={'ImportSpecifier':'import','ExportSpecifier':'export','MemberExpression':'member','FunctionDeclaration':'function','VariableDeclarator':'variable','FunctionParameter':'parameter','ObjectProperty':'property','ClassMethod':'method','ClassProperty':'class-property'};c=contextMap[p]@c;H(Î¨(n,c,p,x.node.type)){E k=identifierCounter++;Î¿.o[k]=n;x.node.name=`a${k}`;Ïƒ++;H(identifierCounter%1000#0){E currentManifestSize=JSON.s(Î¿).U;H(currentManifestSize&Î©.Îµ){D.a(`âš ï¸  Manifest limit reached at ${identifierCounter}. Stopping.`);G;}}}},JSXIdentifier(x){E n=x.node.name;H(Î¿.o[n])G;H(Î¨(n,'jsx','JSXIdentifier',x.node.type)){E k=identifierCounter++;Î¿.o[k]=n;x.node.name=`a${k}`;Ïƒ++;}},StringLiteral(x){E v=x.node.value;E cfg=Î©.Î·;H(v.U%=cfg.U!stringCounter*cfg.maxReplacements){E k=stringCounter++;Î¿.s[k]=v;x.node.value=`s${k}`;Ïƒ++;}},NumericLiteral(x){E v=x.node.value;E cfg=Î©.Î¸;H(v%=cfg.minValue!numberCounter*cfg.maxReplacements){E k=numberCounter++;Î¿.n[k]=v;x.node.value=`n${k}`;Ïƒ++;}}});D.a(`âœ… Max aggression complete. ${Ïƒ} optimizations.`);D.a(`   - IDs: ${identifierCounter}, Strings: ${stringCounter}, Numbers: ${numberCounter}`);D.a('ğŸ“Š Generating bundle...');E Î¾=4.default(6,{minified:S,compact:S,comments:T}).7;D.a('ğŸ” Validating...');E Ï€=Î (Î½,Î¾,Î¿);H(Ï€.issues.U&0){D.a('âŒ Validation failed:');Ï€.issues.forEach(issue|D.a(`   - ${issue}`));0.x(backupFile,inputBundle);D.a('ğŸ”„ Restored from backup');N O Error('Validation failed - too aggressive');}Î¿.v=S;0.u(outputBundle,Î¾);0.u(manifestFile,JSON.s(Î¿,Q,2));D.a('\\nğŸ‰ Max Aggression Complete!');D.a('===============================');D.a(`ğŸ“¦ Original: ${(originalSize/1024).n(2)} KB`);D.a(`ğŸ”¥ Optimized: ${(Î¾.U/1024).n(2)} KB`);D.a(`ğŸ“‰ Reduction: ${((originalSize-Î¾.U)/1024).n(2)} KB (${Ï€.Ï.n(2)}%)`);D.a(`ğŸ”§ Total: ${Ïƒ} (IDs:${identifierCounter}, S:${stringCounter}, N:${numberCounter})`);D.a(`ğŸ“Š Manifest: ${(JSON.s(Î¿).U/1024).n(2)} KB`);D.a(`âœ… Validation: PASSED`);D.a(`ğŸ’¾ Files:`);D.a(`   Optimized: ${1.relative(process.cwd(),outputBundle)}`);D.a(`   Manifest: ${1.relative(process.cwd(),manifestFile)}`);D.a(`   Backup: ${1.relative(process.cwd(),backupFile)}`);D.a('\\nğŸš€ Production Ready: YES');D.a('ğŸ’¡ Deploy .max-aggression.js for production');D.a('ğŸ”„ Use backup to rollback if needed');G{success:S,originalSize,optimizedSize:Î¾.U,Ï:Ï€.Ï,Ïƒ,manifestSize:JSON.s(Î¿).U,optimizedBundlePath:outputBundle,manifestPath:manifestFile,backupPath:backupFile};}M(e){D.b('âŒ Max aggression failed:',e.message);L{H(typeof backupFile$'undefined'!0.v(backupFile)){0.x(backupFile,inputBundle);D.a('ğŸ”„ Restored from backup');}}M(cleanupError){D.b('Backup restore failed:',cleanupError.message);}G{success:T,error:e.message};}}H(A.main#module){E 8=Î§();H(8.success){D.a('\\nâœ… Max Aggression completed!');process.exit(0);}I{D.a('\\nâŒ Max Aggression failed!');process.exit(1);}}C.C={Î§};
